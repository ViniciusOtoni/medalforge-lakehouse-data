name: Infra – Storage Foundation (caller)

on:
  workflow_run:
    workflows: ["Infra – DAG (core-identity -> landing-zone)"]
    types: [completed]

permissions:
  contents: read
  id-token: write
  actions: read

jobs:
  storage_foundation:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    uses: ViniciusOtoni/sunny-data/.github/workflows/storage-foundation.yaml@main
    permissions:
      contents: read
      id-token: write
      actions: read
    secrets:
      AZURE_CREDENTIALS:   ${{ secrets.AZURE_CREDENTIALS }}
      ARM_SUBSCRIPTION_ID: ${{ secrets.ARM_SUBSCRIPTION_ID }}
      ARM_TENANT_ID:       ${{ secrets.ARM_TENANT_ID }}
